@model IEnumerable<FoodOrderingSystem.Models.Order>

@{
    ViewData["Title"] = "My Orders";
}

@section Styles {
    <link rel="stylesheet" href="~/css/orders.css" asp-append-version="true" />
}

<!-- Page Header -->
<div class="orders-header">
    <div class="container">
        <h1>@ViewData["Title"]</h1>
        <p class="lead">A history of all your past purchases.</p>
    </div>
</div>

<!-- Main Content -->
<div class="container orders-content">
    @if (Model.Any())
    {
        <div class="accordion" id="ordersAccordion">
            @foreach (var order in Model)
            {
                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading-@order.Id">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-@order.Id" aria-expanded="false" aria-controls="collapse-@order.Id">
                            <span class="order-date">@order.OrderDate.ToString("MMMM dd, yyyy")</span>
                            <span class="order-number">Order #@order.OrderNumber</span>
                            <span class="order-total ms-auto">RM @order.Total.ToString("F2")</span>
                        </button>
                    </h2>
                    <div id="collapse-@order.Id" class="accordion-collapse collapse" aria-labelledby="heading-@order.Id" data-bs-parent="#ordersAccordion">
                        <div class="accordion-body">
                            <ul class="list-group list-group-flush">
                                @foreach (var item in order.OrderItems)
                                {
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div>
                                            <span class="fw-bold">@item.MenuItem.Name</span>
                                            <small class="text-muted d-block">@item.Quantity x RM@item.Price.ToString("F2")</small>
                                        </div>
                                        <span class="fw-bold">RM@((item.Quantity * item.Price).ToString("F2"))</span>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="text-center">
            <p class="lead">You haven't placed any orders yet.</p>
            <a asp-controller="Menu" asp-action="Index" class="btn btn-primary">Start Ordering</a>
        </div>
    }
</div>

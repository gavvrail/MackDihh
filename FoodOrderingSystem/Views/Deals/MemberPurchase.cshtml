@model FoodOrderingSystem.Controllers.MemberPurchaseViewModel

@{
    ViewData["Title"] = "Become a Member";
}

@section Styles {
    <link rel="stylesheet" href="~/css/deals.css" asp-append-version="true" />
}

<div class="member-purchase-container">
    <div class="container">
        <!-- Page Header -->
        <div class="text-center mb-5">
            <h1 class="display-4">
                <i class="fas fa-crown text-warning me-3"></i>Become a Member
            </h1>
            <p class="lead">Unlock exclusive benefits and earn points on every purchase!</p>
        </div>

        @if (Model.IsMember)
        {
            <div class="alert alert-success text-center">
                <i class="fas fa-check-circle fa-2x mb-3"></i>
                <h4>You're Already a Member!</h4>
                <p>Your membership is active until <strong>@Model.User.MemberExpiryDate?.ToString("MMMM dd, yyyy")</strong></p>
                <p>Current Points: <strong>@Model.CurrentPoints</strong></p>
                <a asp-action="Index" class="btn btn-outline-success">
                    <i class="fas fa-arrow-left me-2"></i>Back to Deals
                </a>
            </div>
        }
        else
        {
            <!-- Membership Benefits -->
            <div class="row mb-5">
                <div class="col-lg-8 mx-auto">
                    <div class="card shadow-sm">
                        <div class="card-header bg-warning text-dark">
                            <h4 class="mb-0"><i class="fas fa-star me-2"></i>Member Benefits</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="benefit-item mb-3">
                                        <i class="fas fa-coins text-warning fa-2x mb-2"></i>
                                        <h6>Earn Points</h6>
                                        <p>Get 1 point for every RM1 spent</p>
                                    </div>
                                    <div class="benefit-item mb-3">
                                        <i class="fas fa-percentage text-success fa-2x mb-2"></i>
                                        <h6>Exclusive Discounts</h6>
                                        <p>Access to member-only deals and promotions</p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="benefit-item mb-3">
                                        <i class="fas fa-gift text-primary fa-2x mb-2"></i>
                                        <h6>Free Rewards</h6>
                                        <p>Redeem points for free food and discounts</p>
                                    </div>
                                    <div class="benefit-item mb-3">
                                        <i class="fas fa-birthday-cake text-danger fa-2x mb-2"></i>
                                        <h6>Birthday Treats</h6>
                                        <p>Special birthday offers and free desserts</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Membership Plans -->
            <div class="row mb-5">
                <div class="col-lg-10 mx-auto">
                    <h3 class="text-center mb-4">Choose Your Membership Plan</h3>
                    <form asp-action="PurchaseMember" method="post">
                        <div class="row">
                            <!-- Monthly Plan -->
                            <div class="col-lg-4 col-md-6 mb-4">
                                <div class="membership-plan-card">
                                    <input type="radio" asp-for="SelectedPlan" value="@FoodOrderingSystem.Models.MemberPlan.Monthly" id="monthly" class="plan-radio" />
                                    <label for="monthly" class="plan-label">
                                        <div class="plan-header">
                                            <h5>Monthly</h5>
                                            <div class="plan-price">
                                                <span class="currency">RM</span>
                                                <span class="amount">29.99</span>
                                                <span class="period">/month</span>
                                            </div>
                                        </div>
                                        <div class="plan-features">
                                            <ul>
                                                <li><i class="fas fa-check text-success me-2"></i>1 month membership</li>
                                                <li><i class="fas fa-check text-success me-2"></i>All member benefits</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Points earning</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Exclusive deals</li>
                                            </ul>
                                        </div>
                                        <div class="plan-savings">
                                            <span class="badge bg-success">Save RM5/month</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Quarterly Plan -->
                            <div class="col-lg-4 col-md-6 mb-4">
                                <div class="membership-plan-card popular">
                                    <div class="popular-badge">MOST POPULAR</div>
                                    <input type="radio" asp-for="SelectedPlan" value="@FoodOrderingSystem.Models.MemberPlan.Quarterly" id="quarterly" class="plan-radio" />
                                    <label for="quarterly" class="plan-label">
                                        <div class="plan-header">
                                            <h5>Quarterly</h5>
                                            <div class="plan-price">
                                                <span class="currency">RM</span>
                                                <span class="amount">79.99</span>
                                                <span class="period">/3 months</span>
                                            </div>
                                        </div>
                                        <div class="plan-features">
                                            <ul>
                                                <li><i class="fas fa-check text-success me-2"></i>3 months membership</li>
                                                <li><i class="fas fa-check text-success me-2"></i>All member benefits</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Points earning</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Exclusive deals</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Bonus 50 points</li>
                                            </ul>
                                        </div>
                                        <div class="plan-savings">
                                            <span class="badge bg-warning text-dark">Save RM10</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Yearly Plan -->
                            <div class="col-lg-4 col-md-6 mb-4">
                                <div class="membership-plan-card">
                                    <input type="radio" asp-for="SelectedPlan" value="@FoodOrderingSystem.Models.MemberPlan.Yearly" id="yearly" class="plan-radio" />
                                    <label for="yearly" class="plan-label">
                                        <div class="plan-header">
                                            <h5>Yearly</h5>
                                            <div class="plan-price">
                                                <span class="currency">RM</span>
                                                <span class="amount">299.99</span>
                                                <span class="period">/year</span>
                                            </div>
                                        </div>
                                        <div class="plan-features">
                                            <ul>
                                                <li><i class="fas fa-check text-success me-2"></i>12 months membership</li>
                                                <li><i class="fas fa-check text-success me-2"></i>All member benefits</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Points earning</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Exclusive deals</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Bonus 200 points</li>
                                                <li><i class="fas fa-check text-success me-2"></i>Free birthday meal</li>
                                            </ul>
                                        </div>
                                        <div class="plan-savings">
                                            <span class="badge bg-danger">Save RM60</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Purchase Button -->
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-warning btn-lg">
                                <i class="fas fa-crown me-2"></i>Become a Member
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Current Points Display -->
            @if (Model.CurrentPoints > 0)
            {
                <div class="row">
                    <div class="col-lg-6 mx-auto">
                        <div class="card bg-light">
                            <div class="card-body text-center">
                                <h5>Your Current Points</h5>
                                <div class="points-display">
                                    <span class="points-number">@Model.CurrentPoints</span>
                                    <span class="points-label">Points</span>
                                </div>
                                <p class="text-muted">These points will be available after you become a member!</p>
                            </div>
                        </div>
                    </div>
                </div>
            }

            <!-- FAQ Section -->
            <div class="row mt-5">
                <div class="col-lg-10 mx-auto">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h4 class="mb-0"><i class="fas fa-question-circle me-2"></i>Frequently Asked Questions</h4>
                        </div>
                        <div class="card-body">
                            <div class="accordion" id="membershipFAQ">
                                <!-- FAQ Item 1 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="faq1">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1">
                                            <i class="fas fa-crown text-warning me-2"></i>What are the benefits of becoming a member?
                                        </button>
                                    </h2>
                                    <div id="collapse1" class="accordion-collapse collapse show" aria-labelledby="faq1" data-bs-parent="#membershipFAQ">
                                        <div class="accordion-body">
                                            <strong>As a MACKDIHH member, you get:</strong>
                                            <ul class="mb-0">
                                                <li><strong>5% discount</strong> on all your orders</li>
                                                <li><strong>Points earning</strong> - 1 point for every RM1 spent</li>
                                                <li><strong>Points redemption</strong> - Use points to get free food items</li>
                                                <li><strong>Birthday benefits</strong> - 100 bonus points + free dessert during your birthday month</li>
                                                <li><strong>Exclusive member deals</strong> and promotions</li>
                                                <li><strong>Priority customer support</strong></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- FAQ Item 2 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="faq2">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
                                            <i class="fas fa-coins text-success me-2"></i>How do points work?
                                        </button>
                                    </h2>
                                    <div id="collapse2" class="accordion-collapse collapse" aria-labelledby="faq2" data-bs-parent="#membershipFAQ">
                                        <div class="accordion-body">
                                            <strong>Points System:</strong>
                                            <ul class="mb-0">
                                                <li><strong>Earning:</strong> Get 1 point for every RM1 you spend on orders</li>
                                                <li><strong>Redemption:</strong> 1 point = RM1 value (use points to get free menu items)</li>
                                                <li><strong>Bonus Points:</strong> Quarterly plan gets 50 bonus points, Yearly plan gets 200 bonus points</li>
                                                <li><strong>Birthday Bonus:</strong> 100 bonus points during your birthday month</li>
                                                <li><strong>Points Expiry:</strong> Points never expire as long as you maintain your membership</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- FAQ Item 3 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="faq3">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
                                            <i class="fas fa-birthday-cake text-danger me-2"></i>What are birthday benefits?
                                        </button>
                                    </h2>
                                    <div id="collapse3" class="accordion-collapse collapse" aria-labelledby="faq3" data-bs-parent="#membershipFAQ">
                                        <div class="accordion-body">
                                            <strong>Birthday Special Benefits:</strong>
                                            <ul class="mb-0">
                                                <li><strong>100 Bonus Points</strong> - Claim once during your birthday month</li>
                                                <li><strong>Free Dessert</strong> - Show your birthday benefit code for a free dessert</li>
                                                <li><strong>Special Offers</strong> - Exclusive birthday deals and promotions</li>
                                                <li><strong>Requirements:</strong> Must be an active member and have your birthday set in your profile</li>
                                                <li><strong>One-time Claim:</strong> Can only claim birthday benefits once per year</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- FAQ Item 4 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="faq4">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
                                            <i class="fas fa-credit-card text-primary me-2"></i>How does billing work?
                                        </button>
                                    </h2>
                                    <div id="collapse4" class="accordion-collapse collapse" aria-labelledby="faq4" data-bs-parent="#membershipFAQ">
                                        <div class="accordion-body">
                                            <strong>Membership Billing:</strong>
                                            <ul class="mb-0">
                                                <li><strong>One-time Payment:</strong> Pay upfront for your chosen membership period</li>
                                                <li><strong>No Auto-renewal:</strong> Your membership expires at the end of the period</li>
                                                <li><strong>Renewal:</strong> You can renew your membership anytime before or after expiry</li>
                                                <li><strong>Payment Methods:</strong> Credit card, debit card, or online banking</li>
                                                <li><strong>Refund Policy:</strong> No refunds for unused membership time</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- FAQ Item 5 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="faq5">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
                                            <i class="fas fa-gift text-warning me-2"></i>Can I use points if I'm not a member?
                                        </button>
                                    </h2>
                                    <div id="collapse5" class="accordion-collapse collapse" aria-labelledby="faq5" data-bs-parent="#membershipFAQ">
                                        <div class="accordion-body">
                                            <strong>Points Usage Policy:</strong>
                                            <ul class="mb-0">
                                                <li><strong>Non-members:</strong> Can earn points but <strong>cannot redeem</strong> them for free food</li>
                                                <li><strong>Points Preservation:</strong> Your points are saved and will be available when you become a member</li>
                                                <li><strong>Members Only:</strong> Only active members can redeem points for free menu items</li>
                                                <li><strong>Upgrade Anytime:</strong> Become a member anytime to unlock your saved points</li>
                                                <li><strong>No Expiry:</strong> Points never expire, even for non-members</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- FAQ Item 6 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="faq6">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
                                            <i class="fas fa-sync-alt text-info me-2"></i>What happens when my membership expires?
                                        </button>
                                    </h2>
                                    <div id="collapse6" class="accordion-collapse collapse" aria-labelledby="faq6" data-bs-parent="#membershipFAQ">
                                        <div class="accordion-body">
                                            <strong>Membership Expiry:</strong>
                                            <ul class="mb-0">
                                                <li><strong>Points Access:</strong> You can no longer redeem points for free food</li>
                                                <li><strong>Points Preservation:</strong> Your points remain saved and will be available when you renew</li>
                                                <li><strong>No More Discounts:</strong> Member discount (5%) will no longer apply to orders</li>
                                                <li><strong>Birthday Benefits:</strong> Birthday benefits are no longer available</li>
                                                <li><strong>Easy Renewal:</strong> You can renew your membership anytime to restore all benefits</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- FAQ Item 7 -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="faq7">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7" aria-expanded="false" aria-controls="collapse7">
                                            <i class="fas fa-headset text-success me-2"></i>How do I get help or support?
                                        </button>
                                    </h2>
                                    <div id="collapse7" class="accordion-collapse collapse" aria-labelledby="faq7" data-bs-parent="#membershipFAQ">
                                        <div class="accordion-body">
                                            <strong>Customer Support:</strong>
                                            <ul class="mb-0">
                                                <li><strong>Live Chat:</strong> Use our customer support chat for immediate help</li>
                                                <li><strong>Email Support:</strong> Contact us through the support form</li>
                                                <li><strong>Priority Support:</strong> Members get faster response times</li>
                                                <li><strong>FAQ Section:</strong> Check this FAQ for common questions</li>
                                                <li><strong>Profile Management:</strong> Update your birthday and profile information anytime</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Plan selection functionality
            $('.plan-radio').on('change', function() {
                $('.membership-plan-card').removeClass('selected');
                $(this).closest('.membership-plan-card').addClass('selected');
            });

            // Auto-select quarterly plan
            $('#quarterly').prop('checked', true).trigger('change');
        });
    </script>
} 